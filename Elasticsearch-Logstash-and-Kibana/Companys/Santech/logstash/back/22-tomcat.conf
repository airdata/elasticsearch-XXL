filter {
  if [type] == "tomcat" {
    multiline {
      patterns_dir => "/etc/logstash/patterns"
      pattern => "(^%{TOMCAT_DATESTAMP})|(^%{CATALINA_DATESTAMP})"
      negate => true
      what => "previous"
    }
#    if "_grokparsefailure" in [tags] {
#      drop { }
#}
    grok {
      patterns_dir => "/etc/logstash/patterns"
      match => [ "message", "%{TOMCATLOG}", "message", "%{CATALINALOG}" ]
    }
    date {
      match => [ "timestamp", "yyyy-MM-dd HH:mm:ss,SSS Z", "MMM dd, yyyy HH:mm:ss a" ]
    }
   }
  }

